(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3659],{6810:function(e,s,t){Promise.resolve().then(t.bind(t,1061))},1061:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return SearchPage}});var r=t(7437),a=t(2265),n=t(1396),l=t.n(n),o=t(4033);function getTypeLabel(e){return({tarifa:"Tarifa",facturacion:"Facturaci\xf3n",pago:"Pagos",servicio:"Servicio",tramite:"Tr\xe1mite",proveedor:"Proveedores",contacto:"Contacto",pagina:"P\xe1gina",institucional:"Institucional",transparencia:"Transparencia",suspension:"Suspensi\xf3n",atencion:"Atenci\xf3n"})[e]||"P\xe1gina"}function SearchPage(){let e=(0,o.useSearchParams)(),[s,t]=(0,a.useState)(""),[n,i]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,x]=(0,a.useState)(!0),[m,h]=(0,a.useState)([]),[f,p]=(0,a.useState)({});(0,a.useEffect)(()=>{let s=(null==e?void 0:e.get("q"))||"";t(s),s.trim().length>=2?performSearch(s):x(!1)},[e]);let performSearch=async e=>{x(!0);try{let s=await fetch("/api/search?q=".concat(encodeURIComponent(e))),t=await s.json();i(t.results),d(t.results);let r={};t.results.forEach(e=>{e.type&&(r[e.type]=(r[e.type]||0)+1)}),p(r)}catch(e){console.error("Error al buscar:",e)}finally{x(!1)}},toggleFilter=e=>{let s;h(s=m.includes(e)?m.filter(s=>s!==e):[...m,e]),0===s.length?d(n):d(n.filter(e=>s.includes(e.type)))};return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Resultados de b\xfasqueda"}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.trim().length>=2&&(window.history.pushState({},"","/busqueda?q=".concat(encodeURIComponent(s))),performSearch(s))},className:"flex gap-2",children:[(0,r.jsxs)("div",{className:"flex-grow relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>t(e.target.value),placeholder:"Buscar en ElectroHuila...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Buscar"})]})}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[c.length>0&&Object.keys(f).length>0&&(0,r.jsx)("div",{className:"w-full lg:w-64 flex-shrink-0",children:(0,r.jsxs)("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:"Filtros"}),m.length>0&&(0,r.jsxs)("button",{onClick:()=>{h([]),d(n)},className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Limpiar"]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Tipo de contenido:"}),Object.entries(f).sort((e,s)=>s[1]-e[1]).map(e=>{let[s,t]=e;return(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("button",{onClick:()=>toggleFilter(s),className:"flex items-center w-full px-3 py-2 text-sm rounded-md transition-colors ".concat(m.includes(s)?"bg-blue-50 text-blue-700 font-medium":"hover:bg-gray-100 text-gray-700"),children:[(0,r.jsx)("span",{className:"flex-grow text-left",children:getTypeLabel(s)}),(0,r.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 rounded-full px-2 py-1",children:t})]})},s)})]})]})}),(0,r.jsx)("div",{className:"flex-grow",children:u?(0,r.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):c.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:[c.length," resultados ",m.length>0?"filtrados ":"",'para "',(null==e?void 0:e.get("q"))||"",'"']}),c.map((e,s)=>(0,r.jsx)("div",{className:"bg-white p-5 border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:(0,r.jsxs)(l(),{href:e.url,className:"block",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-blue-600 hover:underline mb-2",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[(0,r.jsx)("span",{className:"inline-block px-2 py-1 bg-gray-100 rounded-full text-xs mr-2 text-gray-600",children:getTypeLabel(e.type)}),(0,r.jsx)("span",{className:"text-gray-400 text-xs truncate",children:e.url})]}),e.description&&(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:e.description})]})},s))]}):(null==e?void 0:e.get("q"))?(0,r.jsxs)("div",{className:"bg-white p-8 border border-gray-200 rounded-lg shadow-sm text-center",children:[(0,r.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-800 mb-2",children:"No se encontraron resultados"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:['No se encontraron coincidencias para "',e.get("q"),'"']}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 max-w-md mx-auto",children:[(0,r.jsx)("p",{className:"font-medium mb-2",children:"Sugerencias:"}),(0,r.jsxs)("ul",{className:"list-disc text-left pl-5 space-y-1",children:[(0,r.jsx)("li",{children:"Revisa si hay errores de ortograf\xeda"}),(0,r.jsx)("li",{children:"Intenta usar palabras m\xe1s generales"}),(0,r.jsx)("li",{children:"Prueba con sin\xf3nimos"}),(0,r.jsx)("li",{children:"Usa menos palabras en tu b\xfasqueda"})]})]})]}):(0,r.jsx)("div",{className:"bg-white p-8 border border-gray-200 rounded-lg shadow-sm text-center",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Ingresa un t\xe9rmino de b\xfasqueda para ver resultados"})})})]})]})}},622:function(e,s,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=t(2265),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,t){var r,n={},c=null,d=null;for(r in void 0!==t&&(c=""+t),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(d=s.ref),s)l.call(s,r)&&!i.hasOwnProperty(r)&&(n[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===n[r]&&(n[r]=s[r]);return{$$typeof:a,type:e,key:c,ref:d,props:n,_owner:o.current}}s.Fragment=n,s.jsx=q,s.jsxs=q},7437:function(e,s,t){"use strict";e.exports=t(622)},1396:function(e,s,t){e.exports=t(8326)},4033:function(e,s,t){e.exports=t(94)}},function(e){e.O(0,[8326,2971,2472,1744],function(){return e(e.s=6810)}),_N_E=e.O()}]);